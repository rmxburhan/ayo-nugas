<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Boxicons -->
    <link
    href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css"
    rel="stylesheet"
  />
    <!-- My CSS -->
    <link rel="stylesheet" href="/styles/style-dashboard.css" />
    <title>Task management app</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.12.1/date-1.1.2/datatables.min.css"/>
  </head>
  <body>
    <%- include('../layouts/sidebar') %> 


    <!-- CONTENT -->
    <section id="content">
      <%- include('../layouts/navbar') %> 

      <!-- MAIN -->
      <main>
        <div class="head-title">
          <div class="left">
            <h1><%= title %></h1>
            <ul class="breadcrumb">
              <li>
                <a href="#"></a>
              </li>
              <li><i class="bx bx-chevron-right"></i></li>
              <li>
                <a class="active" href="#"><%= title %></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="table-data">
          <div class="order">
            <div class="head">
              <h3>Edit task</h3>
            </div>
            <form action="/tasks/update/<%= task.id %>" method="POST" id="add-user-form">
                <div class="mb-3">
                    <label for="title">Title:</label>
                    <input type="text" name="title" id="title" class="form-control" required placeholder="Enter title..." value="<%= task.title %>"/>
                </div>
                <div class="mb-3">
                    <label for="description">Description:</label>
                    <input type="text" name="description" id="description" class="form-control" required placeholder="Enter description..." value="<%= task.description %>"/>
                </div>
                <div class="mb-3">
                    <label for="user">User:</label>
                    <select name="user" id="user" class="form-control">
                        <% users.forEach( user => { %> 
                            <option value="<%= user._id %>"><%= user.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="mb-3">
                    <button type="submit" value="Save" class="btn btn-dark">Save</button>
                    <button class="btn btn-dark"><a href="/tasks">Cancel</a></button>
                </div>
                <% if (message) { %>
                  <div class="my-3 alert alert-dismissible fade show alert-<%= message.type %>" role="alert">
                     <button class="btn btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
                     <strong><%= message.message %></strong>
                 </div>
                 <% } %>
            </form>
          </div>
        </div>
      </main>
      <!-- MAIN -->
    </section>
    <!-- CONTENT -->
    <script src="/js/main-dashboard.js" ></script>
</body>
</html>